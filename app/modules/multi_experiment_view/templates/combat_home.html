{% extends "common/page_base.html" %}
{% block stylesheets %}
    {{super() }}
     <link href="/multi_experiment_view/static/data_view.css?version={{config['JS_VERSION']}}" rel="stylesheet">
      <style>
    .mlv-card{
        max-width:15rem;
        box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
        border-radius: 5px; 
    }

    .mlv-card p{
      font-size:0.9rem;
    }
    .mlv-header-card{
        padding: 0.5rem;
        margin-bottom:1rem;
        margin-top:1rem;
        display:inline-block;
        background-color:lightgray;
    }

    .mlv-main-card{
      margin-top:0.2rem;
      margin-bottom:0.2rem;
      width:100%;
    }
    .row-class{
    	cursor:pointer !important;
    }
    
    .row-class:hover{
    	background-color:rgb(200,200,200) !important;
    }

    
     .mlv-main-card:hover {
      box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
      cursor:pointer
    }
    
    .centre-div{
    	display:flex;
    	align-items:center;
    	justify-content:center;
    }
    

    .mlv-card:hover {
      box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
      cursor:pointer
    }

    .card-header h5{
      margin-bottom:0rem;
    }

    .mlv-header-card-item{
      margin-left:0.3rem;
      margin-right:0.3rem;
    }
    </style>
 

{% endblock %}


{% block outercontent %}
<div class="row">
	<div class="col-sm-2"></div>
	<div class="col-sm-8">
		<nav class="navbar navbar-default">
	  <div class="container-fluid">
	    <div class="navbar-header">
	      <a class="navbar-brand" href="#">
	        <img alt="COMBAT" src="https://apps-dev.molbiol.ox.ac.uk/combat/images/COMBAT_logo_355.png">
	      </a>
	    </div>
			<ul class="nav navbar-nav navbar-right">
	      <li>
		      <img alt="COMBAT" src="https://apps-dev.molbiol.ox.ac.uk/combat/images/oxweb-logo.gif"> 
	      </li>
	    </ul>				
	  </div>
	</nav>
	</div>
	<div class="col-sm-2"></div>
</div>
<div class ="row" style = "margin-top:100px">
		<div class= "col-sm-4"></div>
	 	<div class= "col-sm-4">
	    	<div id ="main-view" class= "card mlv-main-card" projecttype="peak_classification">
	      		<div class = "card-header bg-info"><h5 style="text-align:center">Browse Data</h5></div>
	        	<div class = "card-body">
	        		
	        		
	          		<div>Start from a blank view</div> 
    			</div>
 			</div>
 		</div>


  	
       <div class= "col-sm-4"></div>
	</div>
	<div class ="row"">
		<div class= "col-sm-4"></div>
	 	<div class= "col-sm-4">class
	    	<div class= "card mlv-main-card" projecttype="peak_classification">
	      		<div class = "card-header bg-info"><h5 style="text-align:center">Current Views</h5></div>
	        	<div style="height:250px" id= "the-table" class = "card-body">
	        		
    			</div>
 			</div>
 		</div>


  	
       <div class= "col-sm-4"></div>
	</div>
	



{% endblock %}


{% block scripts %}
    {{ super() }}
    <script src="{{ url_for('static', filename='js/mlv/pages/genome_home_page.js')}}?version={{config['JS_VERSION']}}"></script>
    <script src="{{ url_for('static', filename='js/mlv/dataview/ciview.js')}}?version={{config['JS_VERSION']}}"></script>
    <script>
    class ProjectManagementTable{
    	constructor(div,project_type){
    		this.project_type=project_type;
    		this._addTable(div);
    		
    	}
    	
    	_loadData(){
    		
    		  let url="/meths/get_project_information";
    	      let to_send={
    	        		filters:{
    	        			type:this.project_type,
    	        		},
    	        		offset:0,
    	        		limit:100000
    	        };
    	        $.ajax({
    	            url:url,
    	            dataType:"json",
    	            type:"POST",
    	            data:JSON.stringify(to_send),
    	            contentType:"application/json"
    	        })
    	        .done(data=>{
    	            this.table.data_view.setItems(data.projects);
    	 		   this.table.resize();
    	        });
    		
    		
    	}
    	
        refresh(){
        	this._loadData();
        }
        
        setViewFunction(func){
        	this.view_function=func;
        }
    	
    	
    	
    	_addTable(div){
    		let self =this;
    		   let columns=[
    	            {"field":"name","name":"Name","datatype":"text",id:"name",sortable:true,filterable:true,width:150},
    	           
    	         
    	            {"field":"description","name":"Description","datatype":"text",id:"c3",sortable:true,filterble:true,width:400}
    	        ];
    		   this.table=new MLVTable(div,columns);
    		   this.table.data_view.getItemMetadata=function(row){
    			   return {"cssClasses":"row-class"};
    		   }
    		   this.table.addListener("row_clicked_listener",function(item,column,e){
    			   window.location="/projects/group_view/"+item.id;
    	          
    	        });
    		   
    		   this._loadData();
    		   
    	}
    	
    }

    $(function(){
    	 new ProjectManagementTable("the-table","group_view");
    	 $("#main-view").click(function(e){
    		 window.location="/projects/group_view/3512"
    	 })
	    
    });
    
    </script>
 
    	
{% endblock %}